{"version":3,"sources":["index.js"],"names":["LiveSearchForm","props","_this","Object","_Users_imac_GitHub_react_live_search_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_imac_GitHub_react_live_search_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_imac_GitHub_react_live_search_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","searchString","results","items","handleChange","bind","_Users_imac_GitHub_react_live_search_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","event","_this2","setState","target","value","length","axios","get","concat","then","_ref","data","isHidden","total","list","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","map","item","index","key","href","url","alt","src","image","name","price","placeholder","type","onChange","React","Component","rootElement","document","getElementById","ReactDOM","render"],"mappings":"yOAMMA,qBACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,aAAc,GACdC,QAAS,CACPC,MAAO,KAGXV,EAAKW,aAAeX,EAAKW,aAAaC,KAAlBX,OAAAY,EAAA,EAAAZ,QAAAY,EAAA,EAAAZ,CAAAD,KARHA,4EAWNc,GAAO,IAAAC,EAAAZ,KAClBA,KAAKa,SAAS,CAAER,aAAcM,EAAMG,OAAOC,QACxCJ,EAAMG,OAAOC,MAAMC,OAAS,EAC7BhB,KAAKa,SAAS,CAAEP,QAAS,CAACC,MAAO,MAGnCU,IAAMC,IAAN,uDAAAC,OAAiER,EAAMG,OAAOC,QAASK,KAAK,SAAAC,GAAc,IAAXC,EAAWD,EAAXC,KAC7FV,EAAKC,SAAS,CAAEP,QAASgB,uCAM3B,IAAIC,EAA+C,IAApCvB,KAAKI,MAAME,QAAQC,MAAMS,QAAgBhB,KAAKI,MAAME,QAAQkB,MAAQ,EAAI,GAAK,SAExFC,EAAO,GAqBX,OApBIzB,KAAKI,MAAME,QAAQC,MAAMS,OAAS,IACpCS,EACAC,EAAAC,EAAAC,cAAA,MAAIC,UAAU,qBACX7B,KAAKI,MAAME,QAAQC,MAAMuB,IAAI,SAACC,EAAMC,GAAP,OAC5BN,EAAAC,EAAAC,cAAA,MAAIK,IAAKD,EAAOH,UAAU,2BACxBH,EAAAC,EAAAC,cAAA,KAAGM,KAAMH,EAAKI,KACZT,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kCACbH,EAAAC,EAAAC,cAAA,OAAKQ,IAAI,GAAGC,IAAG,0BAAAlB,OAA4BY,EAAKO,UAElDZ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iCAAiCE,EAAKQ,MACrDb,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kCAAkCE,EAAKS,MAAtD,kBAINd,EAAAC,EAAAC,cAAA,MAAIC,UAAWN,GACbG,EAAAC,EAAAC,cAAA,KAAGM,KAAK,KAAR,sFAMJR,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BACbH,EAAAC,EAAAC,cAAA,SACEC,UAAU,qBACVY,YAAY,6EACZC,KAAK,OACL3B,MAAOf,KAAKI,MAAMC,aAClBsC,SAAU3C,KAAKQ,eAEjBkB,EAAAC,EAAAC,cAAA,WACGH,WA1DkBmB,IAAMC,YAiE7BC,EAAcC,SAASC,eAAe,eAC5CC,IAASC,OAAOxB,EAAAC,EAAAC,cAACjC,EAAD,MAAoBmD","file":"static/js/main.92a40727.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport axios from \"axios\";\n\nimport \"./styles.css\";\n\nclass LiveSearchForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchString: \"\",\n      results: {\n        items: []\n      }\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({ searchString: event.target.value });\n    if(event.target.value.length < 3) {\n      this.setState({ results: {items: []} });\n      return;\n    }\n    axios.get(`http://new.stocvetov.ru/dev/search.php?query_string=${event.target.value}`).then(({ data }) => {\n      this.setState({ results: data });\n    });\n  }\n\n  render() {\n\n    let isHidden = this.state.results.items.length === 4 && this.state.results.total > 7 ? '' : 'hidden';\n\n    let list = '';\n    if (this.state.results.items.length > 0) {\n      list =\n      <ul className=\"live-search__list\">\n        {this.state.results.items.map((item, index) => (\n          <li key={index} className=\"live-search__list__item\">\n            <a href={item.url}>\n              <div className=\"live-search__list__item__image\">\n                <img alt=\"\" src={`http://new.stocvetov.ru${item.image}`} />\n              </div>\n              <div className=\"live-search__list__item__name\">{item.name}</div>\n              <div className=\"live-search__list__item__price\">{item.price}&nbsp;₽</div>\n            </a>\n          </li>\n        ))}\n        <li className={isHidden}>\n          <a href=\"#\">Все результаты</a>\n        </li>\n      </ul>;\n    }\n\n    return (\n      <div className=\"live-search__container\">\n        <input\n          className=\"live-search__input\"\n          placeholder=\"Поиск по сайту\"\n          type=\"text\"\n          value={this.state.searchString}\n          onChange={this.handleChange}\n        />\n        <div>\n          {list}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst rootElement = document.getElementById(\"live-search\");\nReactDOM.render(<LiveSearchForm />, rootElement);\n"],"sourceRoot":""}